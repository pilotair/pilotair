const __vite__fileDeps=["assets/new-content-Btai1vXo.js","assets/index-CkdniRCF.js","assets/index-5gTwk2XI.css","assets/data-form-DyIJxhnS.js","assets/Table-cTBniRIn.js","assets/CheckOutlined-Daqmf7ce.js","assets/toolbar-layout-CSwFNtw8.js","assets/DownOutlined-cz4r4uzq.js","assets/ClockCircleOutlined-CMhjHB1d.js","assets/index-BGSRdpN6.js","assets/SaveOutlined-BFMsh-NB.js","assets/edit-content-D5IsP9S2.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as o,aN as g,ao as R,aO as v,aq as D,aP as N,j as e,ai as l,aQ as O,aI as I,as as K,aR as h,aS as f,aJ as m,aT as j}from"./index-CkdniRCF.js";import{T as P}from"./toolbar-layout-CSwFNtw8.js";import{T as k}from"./Table-cTBniRIn.js";import"./CheckOutlined-Daqmf7ce.js";import"./DownOutlined-cz4r4uzq.js";const{Search:A}=K;function z({name:n,display:c}){const[r,C]=o.useState(),[s,y]=o.useState(),{openTab:d}=o.useContext(g),[a,p]=o.useState([]),{httpGet:u,httpDelete:_}=R(),{tabKey:x}=o.useContext(v);o.useEffect(()=>{u("content-collection",{name:n}).then(t=>C(t)),i()},[]);function i(){u("content",{collection:n}).then(t=>y(t))}D(N,t=>{t==n&&i()});function E(){d({name:x.name,type:h.new,label:`New ${c||n}`,panel:e.jsx(f,{component:()=>m(()=>import("./new-content-Btai1vXo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])),props:{collection:n}}),icon:e.jsx(j,{})})}function T(t){d({name:x.name,type:h.edit,label:`Edit ${c||n}`,panel:e.jsx(f,{component:()=>m(()=>import("./edit-content-D5IsP9S2.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10])),props:{collection:n,id:t}}),icon:e.jsx(j,{})})}if(!r||!s)return;async function b(){await _("/content",{collection:n,ids:a}),p([]),i()}const w=[...r.fields.map(t=>({title:t.display||t.name,dataIndex:["data",t.name]})),{title:e.jsx(l,{type:"text",shape:"circle",icon:e.jsx(O,{}),onClick:E}),render(t){return e.jsx("div",{children:e.jsx(l,{type:"text",shape:"circle",icon:e.jsx(I,{}),onClick:()=>T(t.id)})})},fixed:"right",width:100,align:"end"}],S=e.jsxs(e.Fragment,{children:[!!a.length&&e.jsx(l,{danger:!0,onClick:b,children:"Delete"}),e.jsx("div",{className:"flex-1"}),e.jsx(A,{className:"w-64",placeholder:"input search text"})]});return e.jsx(P,{header:S,children:e.jsx(k,{rowSelection:{fixed:"left",selectedRowKeys:a,onChange:p},className:"h-full",size:"small",rowKey:"id",dataSource:s==null?void 0:s.list,columns:w})})}export{z as default};
